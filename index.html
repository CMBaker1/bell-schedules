<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Scheduled Sound Alert</title>  
</head>  
<body>  
    <audio id="sound" src="https://github.com/CMBaker1/bell-schedules/raw/refs/heads/main/Clean_up_time.mp3" preload="auto" controls></audio>  
  
    <!-- Button for user interaction -->  
    <button id="startButton">Start Schedule</button>  
  
    <script>  
        console.log("Script loaded successfully");  
  
        const playTimes = ["08:32", "09:02", "09:54", "10:46", "11:38", "12:16", "12:30", "12:59", "13:52", "14:43", "12:06"]; // Include all times  
  
        function checkTimeAndPlay() {  
            const now = new Date();  
            const currentTime = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');  
            console.log("Current time checked:", currentTime);  
  
            if (playTimes.includes(currentTime)) {  
                console.log("Attempting to play sound at:", currentTime);  
                document.getElementById('sound').play().then(() => {  
                    console.log("Sound played successfully at:", currentTime);  
                }).catch(error => {  
                    console.error("Playback failed:", error);  
                });  
            } else {  
                console.log("Current time not a play time:", currentTime);  
            }  
        }  
  
        function startChecking() {  
            checkTimeAndPlay(); // Initial check  
            const now = new Date();  
            const delay = (60 - now.getSeconds()) * 1000; // Delay until the next minute  
            setTimeout(() => {  
                setInterval(checkTimeAndPlay, 60000); // Check every minute on the minute  
                console.log("Schedule started");  
            }, delay);  
        }  
  
        // Add event listener to button to start schedule  
        document.getElementById('startButton').addEventListener('click', startChecking);  
    </script>  
</body>  
</html>  
